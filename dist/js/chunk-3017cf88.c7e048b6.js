(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3017cf88"],{"3b7c":function(t,e,a){"use strict";var r=a("f40e"),s=a.n(r);s.a},"70d9":function(t,e,a){"use strict";var r=a("8522"),s=a.n(r);s.a},8522:function(t,e,a){},"8ba8":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"topserch"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"广告名称"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",placeholder:"请输入广告名称"},model:{value:t.ad_name,callback:function(e){t.ad_name=e},expression:"ad_name"}})],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.refresh}},[t._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchData}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.addData()}}},[t._v("新增")])],1)],1)],1),a("div",{staticClass:"page-content"},[a("el-row",{attrs:{gutter:25}},t._l(t.list,function(e,r){return a("el-col",{key:r,attrs:{span:4.5}},[a("el-card",{staticStyle:{"margin-left":"20px","margin-bottom":"10px"},attrs:{"body-style":{padding:"0px"}}},[a("img",{staticClass:"image",attrs:{src:e.ad_url}}),a("div",{staticStyle:{padding:"14px"}},[a("p",[t._v(t._s(e.ad_name))]),a("p",{staticClass:"detail",staticStyle:{"margin-top":"5px","font-size":"14px",color:"#999"}},[t._v("\n              "+t._s(e.ad_details)+"\n            ")]),a("div",{staticClass:"bottom clearfix"},[a("time",{staticClass:"time"},[t._v(t._s(e.created_at))]),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(a){t.editData(2,e)}}},[t._v("修改")]),a("el-button",{staticClass:"button",staticStyle:{"margin-right":"20px"},attrs:{type:"text"},on:{click:function(a){t.deleteData(e.id)}}},[t._v("删除")])],1)])])],1)}),1),a("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),a("add-data",{ref:"addData"})],1)])},s=[],i=(a("96cf"),a("3b8d")),l=a("f499"),n=a.n(l),o=(a("cadf"),a("551c"),a("097d"),a("fd03")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"AddDialog",attrs:{title:1==t.type?"新增":"编辑",visible:t.dialogVisible,width:"800px",hegiht:"1000px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:t.close}},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"auto"}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"广告名称",prop:"ad_name"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入广告名称"},model:{value:t.ruleForm.ad_name,callback:function(e){t.$set(t.ruleForm,"ad_name",e)},expression:"ruleForm.ad_name"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"广告描述",prop:"ad_details"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入广告描述"},model:{value:t.ruleForm.ad_details,callback:function(e){t.$set(t.ruleForm,"ad_details",e)},expression:"ruleForm.ad_details"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"广告图片",prop:"ad_url"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://testboxapi.yujian02.xyz/api/common/ossUpload?file=file","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.ad_url?a("img",{staticClass:"avatar",attrs:{src:t.ad_url}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"播放时长",prop:"times"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入播放时长"},model:{value:t.ruleForm.times,callback:function(e){t.$set(t.ruleForm,"times",e)},expression:"ruleForm.times"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)],1)},u=[],d={name:"AddDialog",components:{},data:function(){return{type:"",ad_url:"",dialogVisible:!1,ruleForm:{ad_name:"",ad_details:"",ad_url:"",id:"",times:""},FormSearch:{},rules:{ad_name:[{required:!0,message:"请输入广告名称",trigger:"blur"}],ad_details:[{required:!0,message:"请输入广告描述",trigger:"blur"}],ad_url:[{required:!0,message:"请选择广告",trigger:"blur"}],times:[{required:!0,message:"请选择播放时长",trigger:"blur"}]}}},watch:{},created:function(){this.FormSearch=JSON.parse(n()(this.ruleForm))},mounted:function(){},methods:{show:function(t,e){this.type=t,console.log(e),this.dialogVisible=!0,this.ruleForm=e,this.ad_url=this.ruleForm.ad_url},handleAvatarSuccess:function(t,e){this.ruleForm.ad_url=t,this.ad_url=this.ruleForm.ad_url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传图片大小不能超过 2MB!"),e},close:function(){this.dialogVisible=!1,this.ruleForm=JSON.parse(n()(this.FormSearch))},submitForm:function(){var t=this;this.$refs.ruleForm.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(a){var r,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}1==t.type?(r={ad_name:t.ruleForm.ad_name,ad_url:t.ruleForm.ad_url,ad_details:t.ruleForm.ad_details,times:t.ruleForm.times},Object(o["n"])(r).then(function(e){200==e.data.code?t.$message.success("新增成功"):t.$message.error(e.data.msg),t.close(),t.isDisable=!1,t.$parent.getList()})):(s={ad_name:t.ruleForm.ad_name,ad_url:t.ruleForm.ad_url,ad_details:t.ruleForm.ad_details,times:t.ruleForm.times},i=t.ruleForm.id,console.log(i),Object(o["p"])(s,i).then(function(e){200==e.data.code?t.$message.success("修改成功"):t.$message.error(e.data.msg),t.close(),t.isDisable=!1,t.$parent.getList()})),e.next=5;break;case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}}},m=d,p=(a("70d9"),a("2877")),f=Object(p["a"])(m,c,u,!1,null,null,null);f.options.__file="addData.vue";var h=f.exports,g={components:{addData:h},data:function(){return{ad_name:"",page:{currentPage:1,pageSize:10,total:0},list:[]}},created:function(){this.getList()},methods:{getList:function(){var t=this,e={page:this.page.currentPage,limit:this.page.pageSize,ad_name:this.ad_name};Object(o["h"])(e).then(function(e){t.page.total=e.data.total,t.list=e.data.list})},handleSizeChange:function(t){console.log("每页 ".concat(t," 条")),this.page.pageSize=t,this.getList()},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.page.currentPage=t,this.getList()},refresh:function(){this.ad_name=""},addData:function(t){this.$refs.addData.show(1,{})},searchData:function(){var t=this,e={page:1,limit:10,ad_name:this.ad_name};Object(o["h"])(e).then(function(e){t.page.total=e.data.total,t.list=e.data.list})},editData:function(t,e){this.$refs.addData.show(2,JSON.parse(n()(e)))},deleteData:function(t){var e=this;this.$confirm("是否删除此信息？","提示",{type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:Object(o["o"])(t).then(function(t){200==t.data.code?e.$message.success("删除成功"):e.$message.error(t.data.msg),e.getList()});case 1:case"end":return a.stop()}},a,this)}))).catch(function(){})}}},_=g,b=(a("3b7c"),Object(p["a"])(_,r,s,!1,null,"05c8494f",null));b.options.__file="index.vue";e["default"]=b.exports},a21f:function(t,e,a){var r=a("584a"),s=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},f40e:function(t,e,a){},f499:function(t,e,a){t.exports=a("a21f")}}]);