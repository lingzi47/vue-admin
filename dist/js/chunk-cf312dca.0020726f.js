(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf312dca"],{"01e9":function(t,e,a){},"76db":function(t,e,a){"use strict";var r=a("fb37"),i=a.n(r);i.a},"8c15":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"topserch"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"广告名称"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",placeholder:"请输入广告名称"},model:{value:t.ad_name,callback:function(e){t.ad_name=e},expression:"ad_name"}})],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.refresh}},[t._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchData}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.addData()}}},[t._v("新增")])],1)],1)],1),a("div",{staticClass:"page-content"},[a("el-row",t._l(t.list,function(e,r){return a("el-col",{key:r,attrs:{span:4}},[a("el-card",{staticStyle:{"margin-left":"10px","margin-bottom":"10px"},attrs:{"body-style":{padding:"0px"}}},[a("video",{attrs:{id:"myVideo",controls:"controls",width:"100%",height:"100%",poster:""}},[a("source",{attrs:{type:"video/mp4",src:e.ad_url}})]),a("div",{staticStyle:{padding:"14px"}},[a("p",[t._v(t._s(e.ad_name))]),a("p",{staticStyle:{"margin-top":"5px","font-size":"14px",color:"#999"}},[t._v("\n              "+t._s(e.ad_details)+"\n            ")]),a("div",{staticClass:"bottom clearfix"},[a("time",{staticClass:"time"},[t._v(t._s(e.created_at))]),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(a){t.editData(2,e)}}},[t._v("修改")]),a("el-button",{staticClass:"button",staticStyle:{"margin-right":"20px"},attrs:{type:"text"},on:{click:function(a){t.deleteData(e.id)}}},[t._v("删除")])],1)])])],1)}),1),a("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-sizes":[12,24,48,96],"page-size":12,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),a("add-data",{ref:"addData"})],1)])},i=[],s=(a("96cf"),a("3b8d")),o=a("f499"),l=a.n(o),n=(a("cadf"),a("551c"),a("097d"),a("fd03")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"AddDialog",attrs:{title:1==t.type?"新增":"编辑",visible:t.dialogVisible,width:"800px",hegiht:"1000px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:t.close}},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"auto"}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"广告名称",prop:"ad_name"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入广告名称"},model:{value:t.ruleForm.ad_name,callback:function(e){t.$set(t.ruleForm,"ad_name",e)},expression:"ruleForm.ad_name"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"广告描述",prop:"ad_details"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入广告描述"},model:{value:t.ruleForm.ad_details,callback:function(e){t.$set(t.ruleForm,"ad_details",e)},expression:"ruleForm.ad_details"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"广告视频",prop:"ad_url"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://testboxapi.yujian02.xyz/api/common/ossUpload?file=file","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.ad_url?a("video",{attrs:{id:"myVideo",controls:"controls",width:"100%",height:"100%",poster:""}},[a("source",{staticClass:"avatar",attrs:{type:"video/mp4",src:t.ad_url}})]):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"播放时长",prop:"times"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入播放时长"},model:{value:t.ruleForm.times,callback:function(e){t.$set(t.ruleForm,"times",e)},expression:"ruleForm.times"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)],1)},u=[],d={name:"AddDialog",components:{},data:function(){return{type:"",ad_url:"",dialogVisible:!1,ruleForm:{ad_name:"",ad_details:"",ad_url:"",id:"",times:""},FormSearch:{},rules:{ad_name:[{required:!0,message:"请输入广告名称",trigger:"blur"}],ad_details:[{required:!0,message:"请输入广告描述",trigger:"blur"}],times:[{required:!0,message:"请选择播放时长",trigger:"blur"}],ad_url:[{required:!0,message:"请选择广告",trigger:"blur"}]}}},watch:{},created:function(){this.FormSearch=JSON.parse(l()(this.ruleForm))},mounted:function(){},methods:{show:function(t,e){this.type=t,console.log(e),this.dialogVisible=!0,this.ruleForm=e,this.ad_url=this.ruleForm.ad_url},handleAvatarSuccess:function(t,e){this.ruleForm.ad_url=t,this.ad_url=this.ruleForm.ad_url},beforeAvatarUpload:function(t){console.log(t.type);var e="video/mp4"===t.type;return e||(this.$message.error("视频格式应为mp4!"),this.ad_url="",this.ruleForm.ad_url=""),e},close:function(){this.dialogVisible=!1,this.ruleForm=JSON.parse(l()(this.FormSearch))},submitForm:function(){var t=this;this.$refs.ruleForm.validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(a){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}1==t.type?(r={ad_name:t.ruleForm.ad_name,ad_url:t.ruleForm.ad_url,ad_details:t.ruleForm.ad_details,times:t.ruleForm.times},Object(n["q"])(r).then(function(e){200==e.data.code?t.$message.success("新增成功"):t.$message.error(e.data.msg),t.close(),t.isDisable=!1,t.$parent.getList()})):(i={ad_name:t.ruleForm.ad_name,ad_url:t.ruleForm.ad_url,ad_details:t.ruleForm.ad_details,times:t.ruleForm.times},s=t.ruleForm.id,console.log(s),Object(n["s"])(i,s).then(function(e){200==e.data.code?t.$message.success("修改成功"):t.$message.error(e.data.msg),t.close(),t.isDisable=!1,t.$parent.getList()})),e.next=5;break;case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}}},m=d,p=(a("a41f"),a("2877")),h=Object(p["a"])(m,c,u,!1,null,null,null);h.options.__file="addData.vue";var f=h.exports,g={components:{addData:f},data:function(){return{ad_name:"",list:[],page:{currentPage:1,pageSize:12,total:0}}},created:function(){this.getList()},methods:{getList:function(){var t=this,e={page:this.page.currentPage,limit:this.page.pageSize,ad_name:this.ad_name},a={Authorization:"Bearer "+localStorage.getItem("token")};Object(n["j"])(e,a).then(function(e){t.page.total=e.data.total,t.list=e.data.list})},handleSizeChange:function(t){console.log("每页 ".concat(t," 条")),this.page.pageSize=t,this.getList()},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.page.currentPage=t,this.getList()},refresh:function(){this.ad_name=""},addData:function(t){this.$refs.addData.show(1,{})},searchData:function(){var t=this,e={page:1,limit:10,ad_name:this.ad_name};Object(n["j"])(e).then(function(e){t.page.total=e.data.total,t.list=e.data.list})},editData:function(t,e){this.$refs.addData.show(2,JSON.parse(l()(e)))},deleteData:function(t){var e=this;this.$confirm("是否删除此信息？","提示",{type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:Object(n["r"])(t).then(function(t){200==t.data.code?e.$message.success("删除成功"):e.$message.error(t.data.msg),e.getList()});case 1:case"end":return a.stop()}},a,this)}))).catch(function(){})}}},_=g,b=(a("76db"),Object(p["a"])(_,r,i,!1,null,"3447c346",null));b.options.__file="index.vue";e["default"]=b.exports},a21f:function(t,e,a){var r=a("584a"),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},a41f:function(t,e,a){"use strict";var r=a("01e9"),i=a.n(r);i.a},f499:function(t,e,a){t.exports=a("a21f")},fb37:function(t,e,a){}}]);