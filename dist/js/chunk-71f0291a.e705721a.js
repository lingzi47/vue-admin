(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71f0291a"],{2187:function(e,t,a){"use strict";var l=a("b4f3"),r=a.n(l);r.a},8285:function(e,t,a){"use strict";var l=a("ffe3"),r=a.n(l);r.a},"8b64":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"topserch"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"设备编号"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",placeholder:"请输入设备编号"},model:{value:e.dev_id,callback:function(t){e.dev_id=t},expression:"dev_id"}})],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索")])],1)],1)],1),a("div",{staticClass:"page-content"},[a("el-table",{staticClass:"tab-bar",attrs:{data:e.list,border:"",stripe:""},on:{"selection-change":e.getSelection}},[a("el-table-column",{attrs:{label:"选中",type:"selection",align:"center",width:"50"}}),a("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.page.currentPage-1)*e.page.pageSize+t.$index+1))])]}}])}),a("el-table-column",{attrs:{prop:"dev_id",label:"设备号",align:"center"}}),a("el-table-column",{attrs:{prop:"city",label:"城市",align:"center"}}),a("el-table-column",{attrs:{label:"任务",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.bizType?a("el-link",[e._v("上刊")]):e._e(),2==t.row.bizType?a("el-link",[e._v("下刊")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"time",label:"上传时间",align:"center"}}),a("el-table-column",{attrs:{prop:"time",label:"上刊图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticClass:"table-img",attrs:{src:e.row.url,width:"60px"}})]}}])}),a("el-table-column",{attrs:{prop:"batchId",label:"推送批次",align:"center"}}),a("el-table-column",{attrs:{prop:"photoMode",label:"拍照类型",align:"center"}}),a("el-table-column",{attrs:{prop:"photoPaper",label:"是否夹报纸",align:"center"}}),a("el-table-column",{attrs:{prop:"photoPaperType",label:"夹报类型",align:"center"}}),a("el-table-column",{attrs:{label:"额外拍照",prop:"photoPaperSpecial",align:"center"}}),a("el-table-column",{attrs:{prop:"photoMark",label:"照片水印",align:"center"}}),a("el-table-column",{attrs:{prop:"phone_name",label:"广告名字",align:"center"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"created_at",align:"center"}}),a("el-table-column",{attrs:{label:"备注",prop:"remark",align:"center"}}),a("el-table-column",{attrs:{label:"是否推送",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.is_push_xc?a("el-link",[e._v("未推")]):e._e(),2==t.row.is_push_xc?a("el-link",[e._v("已推")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning",underline:!1},on:{click:function(a){e.editData(2,t.row)}}},[e._v("上刊")]),a("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",underline:!1},on:{click:function(a){e.deleteData(t.row)}}},[e._v("推送")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("add-data",{ref:"addData"})],1)])},r=[],i=(a("96cf"),a("3b8d")),n=(a("6d67"),a("6b54"),a("87b3"),a("f499")),o=a.n(n),s=(a("cadf"),a("551c"),a("097d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"AddDialog",attrs:{title:"上传",visible:e.dialogVisible,width:"800px",hegiht:"1000px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"auto"}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"上刊图片",prop:"imagesPath"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://testboxapi.yujian02.xyz/api/common/obsUpload?file=file","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,data:e.uploadData,accept:".jpg"}},[e.imagesPath?a("img",{staticClass:"avatar",attrs:{src:e.imagesPath}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注描述",prop:"ramark"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入备注"},model:{value:e.ruleForm.ramark,callback:function(t){e.$set(e.ruleForm,"ramark",t)},expression:"ruleForm.ramark"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)}),c=[],u=(a("7f7f"),a("fd03"));a("795b");var p={name:"AddDialog",components:{},data:function(){return{type:"",img:"",file:{},banners:[],filePath:"",fileName:"",imagesPath:"",fileList:[],dialogVisible:!1,ruleForm:{imagesPath:"",ramark:"",id:""},uploadData:{push_city:"",weekNo:"",supplier:""},FormSearch:{},rules:{imagesPath:[{required:!0,message:"请选择图片",trigger:"blur"}],ramark:[{required:!0,message:"请输入备注",trigger:"blur"}]}}},watch:{},created:function(){this.FormSearch=JSON.parse(o()(this.ruleForm))},mounted:function(){},methods:{show:function(e,t){this.type=e,console.log(t),this.dialogVisible=!0,this.ruleForm.id=t.id,this.uploadData.push_city=t.push_city,this.uploadData.weekNo=t.weekNo,this.uploadData.supplier=t.supplier},handleAvatarSuccess:function(e,t){this.ruleForm.imagesPath=e.data.src,this.imagesPath=this.ruleForm.imagesPath,console.log(this.imagesPath)},beforeAvatarUpload:function(e){console.log(e.name);var t=e.name.substring(e.name.length-3);console.log(t);var a=e.size/1024/1024<2;if("jpg"!==t&&(this.$message.error("上传头像图片只能是 JPG 格式!"),retur),!a)return this.$message.error("上传头像图片大小不能超过 2MB!"),a},close:function(){this.dialogVisible=!1,this.ruleForm=JSON.parse(o()(this.FormSearch)),this.imagesPath="",this.uploadData.push_city="",this.uploadData.supplier="",this.uploadData.weekNo=""},submitForm:function(){var e=this;console.log(this.img),this.$refs.ruleForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(a){var l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=6;break}console.log(e.banners),l={id:e.ruleForm.id,ramark:e.ruleForm.ramark,url:e.imagesPath},Object(u["Bb"])(l).then(function(t){200==t.data.code?e.$message.success("新增成功"):e.$message.error(t.data.msg),e.close(),e.isDisable=!1,e.$parent.getList()}),t.next=7;break;case 6:return t.abrupt("return",!1);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}}},d=p,g=(a("8285"),a("2877")),h=Object(g["a"])(d,s,c,!1,null,null,null);h.options.__file="addData.vue";var m=h.exports,f={components:{addData:m},data:function(){return{dev_id:"",page:{currentPage:1,pageSize:10,total:0},list:[]}},created:function(){this.getList()},methods:{handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.page.pageSize=e,this.getList()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.page.currentPage=e,this.getList()},addData:function(e){this.$refs.addData.show(1,{})},getList:function(){var e=this,t={page:this.page.currentPage,limit:this.page.pageSize,dev_id:this.dev_id};Object(u["Z"])(t).then(function(t){console.log(t.data),e.page.total=t.data.total,e.list=t.data.list})},searchData:function(){var e=this,t={page:1,limit:this.page.pageSize,dev_id:this.dev_id};Object(u["Z"])(t).then(function(t){console.log(t),e.page.total=t.data.total,e.list=t.data.list})},editData:function(e,t){this.$refs.addData.show(2,JSON.parse(o()(t)))},getSelection:function(e){var t=e.map(function(e){return e.id}).toString();console.log(t)},deleteData:function(e){var t=this;this.$confirm("是否推送此信息？","提示",{type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark(function a(){var l;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:l={id:e.id},Object(u["kb"])(l).then(function(e){200==e.data.code?t.$message.success("推送成功"):t.$message.error(e.data.msg),t.getList()});case 2:case"end":return a.stop()}},a,this)}))).catch(function(){})}}},b=f,v=(a("2187"),Object(g["a"])(b,l,r,!1,null,"d6059b78",null));v.options.__file="index.vue";t["default"]=v.exports},a21f:function(e,t,a){var l=a("584a"),r=l.JSON||(l.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},b4f3:function(e,t,a){},f499:function(e,t,a){e.exports=a("a21f")},ffe3:function(e,t,a){}}]);